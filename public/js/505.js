(self.webpackChunk=self.webpackChunk||[]).push([[505],{1505:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>Se});var o=t(5166),l=(0,o.withScopeId)("data-v-33299577");(0,o.pushScopeId)("data-v-33299577");var s=(0,o.createVNode)("head",null,[(0,o.createVNode)("title",null,"Cases")],-1),r={class:"container-fluid p-0"},c=(0,o.createVNode)("h1",{class:"h3 mb-3"},"Cases",-1),d={class:"row"},i={class:"col-12"},n={class:"card"},v=(0,o.createVNode)("div",{class:"card-header"}," Overview ",-1),m={class:"card-body px-1 py-2"},p={class:"row p-4"},u={class:"col-md-12"},w=(0,o.createVNode)("i",{class:"fas fa-plus"},null,-1),y=(0,o.createTextVNode)(" Add Case "),b=(0,o.createVNode)("div",{class:"col-md-12 mt-4"},[(0,o.createVNode)("table",{id:"cases-table",class:"table table-bordered nowrap",style:{width:"100%"}})],-1),f={class:"modal fade",id:"employer-form-mdl","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},N={class:"modal-dialog modal-lg"},V={class:"modal-content"},k={class:"modal-header"},_={class:"modal-title",id:"staticBackdropLabel"},h=(0,o.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),g={class:"modal-body"},C={class:"d-flex flex-column"},S=(0,o.createStaticVNode)('<div class="row" data-v-33299577><div class="col-sm-12 col-lg-6" data-v-33299577><label data-v-33299577>Agency / Company</label><select id="select2-agencies" class="form-select select2" data-v-33299577></select></div><div class="col-sm-12 col-lg-6" data-v-33299577><label data-v-33299577>Employer</label><select id="select2-employers" class="form-select select2" data-v-33299577></select></div></div>',1),x={class:"row"},D=(0,o.createVNode)("div",{class:"col-sm-12 col-lg-6"},[(0,o.createVNode)("label",null,"Worker"),(0,o.createVNode)("select",{id:"select2-worker",class:"form-select select2"})],-1),B={class:"col-sm-12 col-lg-6"},M=(0,o.createVNode)("label",null,"Case No.",-1),T={class:"col-sm-12 col-lg-6"},O=(0,o.createVNode)("label",null,"Case Officer / Welfare",-1),F={class:"row"},U=(0,o.createStaticVNode)('<div class="col-12 mb-1" data-v-33299577><label data-v-33299577>Status</label><select id="select2-status" class="form-control select2" data-v-33299577><option value="" data-v-33299577> -- None --</option><option value="warning" data-v-33299577>Warning</option><option value="suspended" data-v-33299577>Suspended</option><option value="lifted" data-v-33299577>Lifted</option></select></div>',1),j={key:0,class:"col-sm-12 col-lg-6"},I=(0,o.createVNode)("label",null,"Suspension Date",-1),E={key:1,class:"col-sm-12 col-lg-6"},P=(0,o.createVNode)("label",null,"No. Of Days Suspended",-1),W={key:2,class:"col-sm-12 col-lg-6"},L=(0,o.createVNode)("label",null,"No. Of Days Warning",-1),z={key:3,class:"col-sm-12 col-lg-6"},A=(0,o.createVNode)("label",null,"Lifted Date",-1),R={class:"row"},X={class:"col-12"},q=(0,o.createVNode)("label",null,"Nature of Complaint",-1),G={class:"col-12"},H=(0,o.createVNode)("label",null,"Remarks",-1),J={class:"modal-footer"},K=(0,o.createVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1),Q={class:"modal fade",id:"notifier-form-mdl",tabindex:"-1"},Y={class:"modal-dialog"},Z={class:"modal-content"},ee={class:"modal-header"},ae={class:"modal-title"},te=(0,o.createVNode)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),oe={class:"modal-body"},le={class:"d-flex flex-column"},se={class:"row mb-2"},re=(0,o.createVNode)("div",{class:"col-auto"},"Email To:",-1),ce={class:"col-auto fw-bold"},de={key:0},ie={class:"badge bg-info-dark"},ne=(0,o.createVNode)("hr",null,null,-1),ve={class:"mb-2"},me=(0,o.createVNode)("label",null,"Nature Of Complaint:",-1),pe={class:"fw-bold"},ue={class:"mb-2"},we=(0,o.createVNode)("label",null,"Remarks:",-1),ye={class:"fw-bold"},be={class:"mb-2"},fe=(0,o.createVNode)("label",null,"Status:",-1),Ne={key:0,class:"fw-bold text-capitalize bg-danger text-white p-2"},Ve={key:1,class:"fw-bold text-capitalize bg-warning p-2"},ke={key:2,class:"fw-bold text-capitalize bg-success text-white p-2"},_e={class:"modal-footer"},he=(0,o.createVNode)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);(0,o.popScopeId)();var ge=l((function(e,a,t,l,$,ge){return(0,o.openBlock)(),(0,o.createBlock)(o.Fragment,null,[s,(0,o.createVNode)("div",null,[(0,o.createVNode)("div",r,[c,(0,o.createVNode)("div",d,[(0,o.createVNode)("div",i,[(0,o.createVNode)("div",n,[v,(0,o.createVNode)("div",m,[(0,o.createVNode)("div",p,[(0,o.createVNode)("div",u,[(0,o.createVNode)("button",{onClick:a[1]||(a[1]=function(){return ge.showFormMdl&&ge.showFormMdl.apply(ge,arguments)}),class:"btn btn-primary"},[w,y])]),b])])])])])]),(0,o.createVNode)("div",f,[(0,o.createVNode)("div",N,[(0,o.createVNode)("div",V,[(0,o.createVNode)("div",k,[(0,o.createVNode)("h5",_,(0,o.toDisplayString)($.overview.title),1),h]),(0,o.createVNode)("div",g,[(0,o.createVNode)("div",C,[S,(0,o.createVNode)("div",x,[D,(0,o.createVNode)("div",B,[M,(0,o.withDirectives)((0,o.createVNode)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[2]||(a[2]=function(e){return $.overview.atnsia_no=e})},null,512),[[o.vModelText,$.overview.atnsia_no]])]),(0,o.createVNode)("div",T,[O,(0,o.withDirectives)((0,o.createVNode)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[3]||(a[3]=function(e){return $.overview.case_officer=e})},null,512),[[o.vModelText,$.overview.case_officer]])])]),(0,o.createVNode)("div",F,[U,"suspended"==$.overview.status?((0,o.openBlock)(),(0,o.createBlock)("div",j,[I,(0,o.withDirectives)((0,o.createVNode)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[4]||(a[4]=function(e){return $.overview.suspension_date=e})},null,512),[[o.vModelText,$.overview.suspension_date]])])):(0,o.createCommentVNode)("",!0),"suspended"==$.overview.status?((0,o.openBlock)(),(0,o.createBlock)("div",E,[P,(0,o.withDirectives)((0,o.createVNode)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[5]||(a[5]=function(e){return $.overview.days_suspended=e})},null,512),[[o.vModelText,$.overview.days_suspended]])])):(0,o.createCommentVNode)("",!0),"warning"==$.overview.status?((0,o.openBlock)(),(0,o.createBlock)("div",W,[L,(0,o.withDirectives)((0,o.createVNode)("input",{type:"number",class:"form-control","onUpdate:modelValue":a[6]||(a[6]=function(e){return $.overview.days_warning=e})},null,512),[[o.vModelText,$.overview.days_warning]])])):(0,o.createCommentVNode)("",!0),"lifted"==$.overview.status?((0,o.openBlock)(),(0,o.createBlock)("div",z,[A,(0,o.withDirectives)((0,o.createVNode)("input",{type:"date",class:"form-control","onUpdate:modelValue":a[7]||(a[7]=function(e){return $.overview.lifted_date=e})},null,512),[[o.vModelText,$.overview.lifted_date]])])):(0,o.createCommentVNode)("",!0)])]),(0,o.createVNode)("div",R,[(0,o.createVNode)("div",X,[q,(0,o.withDirectives)((0,o.createVNode)("textarea",{class:"form-control","onUpdate:modelValue":a[8]||(a[8]=function(e){return $.overview.complaint=e})},null,512),[[o.vModelText,$.overview.complaint]])]),(0,o.createVNode)("div",G,[H,(0,o.withDirectives)((0,o.createVNode)("textarea",{class:"form-control","onUpdate:modelValue":a[9]||(a[9]=function(e){return $.overview.remarks=e})},null,512),[[o.vModelText,$.overview.remarks]])])])]),(0,o.createVNode)("div",J,[K,(0,o.createVNode)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:a[10]||(a[10]=function(){return ge.store&&ge.store.apply(ge,arguments)})}," Save ")])])])]),(0,o.createVNode)("div",Q,[(0,o.createVNode)("div",Y,[(0,o.createVNode)("div",Z,[(0,o.createVNode)("div",ee,[(0,o.createVNode)("h5",ae,(0,o.toDisplayString)($.overview.title),1),te]),(0,o.createVNode)("div",oe,[(0,o.createVNode)("div",le,[(0,o.createVNode)("div",se,[re,(0,o.createVNode)("div",ce,[$.overview.company?((0,o.openBlock)(),(0,o.createBlock)("label",de,[(0,o.createVNode)("i",ie,(0,o.toDisplayString)($.overview.company.type),1),(0,o.createTextVNode)(" "+(0,o.toDisplayString)($.overview.company.name)+" <"+(0,o.toDisplayString)($.overview.company.email)+">",1)])):(0,o.createCommentVNode)("",!0)])]),ne,(0,o.createVNode)("div",ve,[me,(0,o.createVNode)("p",pe,(0,o.toDisplayString)($.overview.complaint),1)]),(0,o.createVNode)("div",ue,[we,(0,o.createVNode)("p",ye,(0,o.toDisplayString)($.overview.remarks),1)]),(0,o.createVNode)("div",be,[fe,"suspended"===$.overview.status?((0,o.openBlock)(),(0,o.createBlock)("p",Ne,(0,o.toDisplayString)($.overview.status)+" "+(0,o.toDisplayString)($.overview.days_suspended)+" Days ",1)):"warning"===$.overview.status?((0,o.openBlock)(),(0,o.createBlock)("p",Ve,(0,o.toDisplayString)($.overview.status)+" "+(0,o.toDisplayString)($.overview.days_warning)+" Days ",1)):((0,o.openBlock)(),(0,o.createBlock)("p",ke,(0,o.toDisplayString)($.overview.status),1))])])]),(0,o.createVNode)("div",_e,[he,(0,o.createVNode)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:a[11]||(a[11]=function(){return ge.notify&&ge.notify.apply(ge,arguments)})},"Send Notification ")])])])])])],64)}));const Ce={name:"Cases",props:["data"],data:function(){return{dt:null,overview:{status:"",company_id:"",suspension_date:"",lifted_date:"",days_suspended:"",days_warning:"",employer_id:"",case_officer:"",worker_id:"",atnsia_no:"",complaint_id:"",complaint:"",remarks:"",title:"New Case"},caseFormMdl:null,notifierFormMdl:null}},methods:{showFormMdl:function(){this.caseFormMdl.show(),$(".select2").val("").trigger("change"),this.overview={status:"",company_id:"",suspension_date:"",lifted_date:"",days_suspended:"",employer_id:"",case_officer:"",worker_id:"",atnsia_no:"",complaint_id:"",complaint:"",remarks:"",title:"New Case"}},store:function(){var e=this;axios.post(this.data.cases_store_link,this.overview).then((function(){e.dt.draw()}))},select2Binder:function(e,a,t){$(e).append('<option value="'+a+'">'+t+"</option>"),$(e).val(a),$(e).trigger("change")},notify:function(){axios.post(this.data.case_notify_link,this.overview).then((function(){alertify.success('<label class="text-white">Notification has been Sent!</label>')}))}},mounted:function(){var e=this;e.caseFormMdl=new bootstrap.Modal(document.getElementById("employer-form-mdl"),{keyboard:!1}),e.notifierFormMdl=new bootstrap.Modal(document.getElementById("notifier-form-mdl"),{keyboard:!1}),e.dt=$("#cases-table").DataTable({serverSide:!0,scrollX:!0,ajax:{url:e.data.cases_table_link,type:"POST"},order:[[0,"desc"]],columns:[{data:"id",name:"id",title:"ID"},{data:"status_btn",name:"status",title:"Status"},{data:"company_name_display",name:"company.name",title:"Agency / Company"},{data:"company.type",name:"company.type",title:"Company Type"},{data:"employer.name",name:"employer.name",title:"Employer"},{data:"case_officer",name:"case_officer",title:"Case Officer"},{data:"full_name",name:"worker.last_name",title:"Worker"},{data:"atnsia_no",name:"worker.atnsia_no",title:"Case No."}],drawCallback:function(a){$(".btn-name").on("click",(function(){e.caseFormMdl.show(),e.overview=e.dt.row($(this).parent().parent()).data(),e.overview.title="Edit Case",e.select2Binder("#select2-agencies",e.overview.company_id,e.overview.company.name),e.select2Binder("#select2-worker",e.overview.worker_id,e.overview.full_name),e.select2Binder("#select2-employers",e.overview.employer_id,e.overview.employer.name),$("#select2-status").val(e.overview.status).trigger("change")})),$(".btn-notifier").click((function(){e.notifierFormMdl.show(),e.overview=e.dt.row($(this).parent().parent()).data(),e.overview.title="Message Preview"}))}}),$("#select2-agencies").select2({allowClear:!0,placeholder:"-- Select Option --",theme:"bootstrap-5",ajax:{url:e.data.list_agencies_link,dataType:"json",method:"POST"}}).on("select2:select",(function(a){e.overview.company_id=a.params.data.id})),$("#select2-worker").select2({allowClear:!0,placeholder:"-- Select Option --",theme:"bootstrap-5",ajax:{url:e.data.list_workers_link,dataType:"json",method:"POST"}}).on("select2:select",(function(a){e.overview.worker_id=a.params.data.id})),$("#select2-employers").select2({allowClear:!0,placeholder:"-- Select Option --",theme:"bootstrap-5",ajax:{url:e.data.list_employers_link,dataType:"json",method:"POST"}}).on("select2:select",(function(a){e.overview.employer_id=a.params.data.id})),$("#select2-status").select2({allowClear:!0,placeholder:"-- Select Option --",theme:"bootstrap-5"}).on("select2:select",(function(a){e.overview.status=a.params.data.id}))}};Ce.render=ge,Ce.__scopeId="data-v-33299577";const Se=Ce}}]);
//# sourceMappingURL=505.js.map?id=43c71d17490f850951b9